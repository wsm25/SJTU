# 1545. 维度跃迁

由区间和、修改元素双操作，想到线段树。这题没有区间修改的要求，所以
lazy edit 都可以省去了。

唯一的难点是，它是一个斜着的矩形，不过好在这个矩形性质极好：45° 倾斜的的正方形。

想到用一个 45° 倾斜的坐标作为线段树区间，并以 $\overline{x'y'}$ 作为线段坐标。 

$$
\newcommand{\vv}[2]{\left(\begin{array}{r}{#1}\\{#2}\end{array}\right)}
\vv{x'}{y'}=\vv{x+y}{-x+y}
$$

~~就是这和连续有啥关系~~。

然而这会 OOM。

题目限制 512M。但是当 m+n=6k 时，线段树内存占用要
4\*8\*6k\*6k=1152M，超过 1G 了。

这是因为，这种方案会浪费两部分内存：
- x', y' 不同奇偶
- 矩形外的

因此我通过包装的方式，储存方式还是用原坐标，indexing 用斜坐标，减少内存分配。

## Pending
太繁了，不写了（逃）